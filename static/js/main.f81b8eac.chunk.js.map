{"version":3,"sources":["containers/MovieItem/MovieItem.js","components/Navigation/Navigation.js","services/api-service.js","ErrorBoundary/ErrorBoundary.js","components/Spinner/Spinner.js","Context/Context.js","containers/SearchMovieList/SearchMovieList.js","containers/RatedMovieList/RatedMovieList.js","components/TabPanel/TabPanel.js","containers/App/App.js","index.js"],"names":["Text","Typography","Title","MovieItem","this","props","poster","title","date","genresList","genreIds","overview","rateMovie","filmId","guestId","voteAverage","rating","genres","map","genresFilm","filter","item","id","currentGenre","code","key","name","image","className","FrownTwoTone","src","alt","styleColor","releaseDate","format","Date","level","style","borderColor","type","strong","allowHalf","count","defaultValue","fontSize","onChange","num","value","Component","Navigation","totalMovieResults","nextPage","loadMovieList","total","pageSize","page","ApiService","_apiKey","_apiBase","fetch","res","ok","Error","status","json","requestGenresList","searchTerm","pageNumber","requestSearchList","requestGuestSession","movieId","requestBody","method","headers","body","JSON","stringify","response","result","requestRatedMovieList","ErrorBoundary","state","hasError","error","info","setState","children","Spinner","size","React","createContext","GenresProvider","Provider","GenresConsumer","Consumer","SearchMovieList","searchMovies","currentPage","col","apiService","searchList","getSearchList","then","list","results","total_results","catch","onError","checkWidth","document","documentElement","clientWidth","newPage","prevProps","prevState","onRateClick","activeTab","data","film","poster_path","original_title","release_date","genre_ids","vote_average","loadGenres","Fragment","grid","gutter","column","dataSource","renderItem","Item","description","RatedMovieList","ratedMovies","ratedList","getRatedList","TabPane","Tabs","Search","Input","TabPanel","inputRef","focus","changeSearch","defaultActiveKey","e","changeTab","tab","ref","placeholder","target","App","guestSessionId","debounce","guestSession","getGuestId","session","guest_session_id","getGenresList","requestRateMovie","div","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.f81b8eac.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Typography, Card, Rate } from 'antd';\r\nimport { format } from 'date-fns';\r\nimport { FrownTwoTone } from '@ant-design/icons';\r\nimport './MovieItem.css';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nclass MovieItem extends Component {\r\n  static propTypes = {\r\n    poster: PropTypes.string,\r\n    title: PropTypes.string,\r\n    date: PropTypes.string,\r\n    genresList: PropTypes.array,\r\n    genreIds: PropTypes.array,\r\n    overview: PropTypes.string,\r\n    rateMovie: PropTypes.func.isRequired,\r\n    filmId: PropTypes.number,\r\n    guestId: PropTypes.string,\r\n    voteAverage: PropTypes.number,\r\n    rating: PropTypes.number,\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      poster, title, date, genresList, genreIds, overview,\r\n      rateMovie, filmId, guestId, voteAverage, rating,\r\n    } = this.props;\r\n\r\n    const genres = genreIds.map((genresFilm) => {\r\n      const [currentGenre] = genresList.filter((item) => (\r\n        item.id === genresFilm));\r\n      return (<Text code key={currentGenre.id}>{currentGenre.name}</Text>);\r\n    });\r\n\r\n    let image = <div className='noImage'>\r\n                  <span>No Image</span>\r\n                  <FrownTwoTone/>\r\n                </div>;\r\n\r\n    if (poster) {\r\n      image = <img src={`http://image.tmdb.org/t/p/w185${poster}`} alt='poster'/>;\r\n    }\r\n    let styleColor = null;\r\n    if (voteAverage >= 7) {\r\n      styleColor = '#66e900';\r\n    } else if (voteAverage >= 5) {\r\n      styleColor = '#e9d100';\r\n    } else if (voteAverage >= 3) {\r\n      styleColor = '#e97e00';\r\n    } else {\r\n      styleColor = '#e90000';\r\n    }\r\n    const releaseDate = date ? format(new Date(date), 'MMMM d, yyyy') : null;\r\n    return (\r\n\r\n      <Card>\r\n        <div className='poster'>\r\n          {image}\r\n        </div>\r\n        <div className='description'>\r\n          <div className='title'>\r\n            <Title level={4}>{title}</Title>\r\n          </div>\r\n          <div className='vote-average' style={{ borderColor: styleColor }}>\r\n            <span>{voteAverage}</span>\r\n          </div>\r\n          <div className='date'>\r\n            <Text type=\"secondary\">{releaseDate}</Text>\r\n          </div>\r\n          <div className=\"genres\">\r\n            {genres}\r\n          </div>\r\n          <div className=\"overview\">\r\n            <Text strong>{overview}</Text>\r\n          </div>\r\n          <div className=\"rate\">\r\n            <Rate allowHalf count='10' defaultValue={rating} style={{ fontSize: 14 }} onChange={(num) => {\r\n              const body = {\r\n                value: num,\r\n              };\r\n              rateMovie(filmId, guestId, body);\r\n            }}/>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieItem;\r\n","import React from 'react';\r\nimport { Pagination } from 'antd';\r\nimport './Navigation.css';\r\n\r\nconst Navigation = (props) => {\r\n  const {\r\n    totalMovieResults, nextPage, loadMovieList,\r\n  } = props;\r\n\r\n  if (loadMovieList && totalMovieResults > 20) {\r\n    return (\r\n      <Pagination\r\n        total={totalMovieResults}\r\n        pageSize='20'\r\n        onChange={(page) => { nextPage(page); }}\r\n      />\r\n    );\r\n  }\r\n  return null;\r\n};\r\nexport default Navigation;","export default class ApiService {\r\n  _apiKey = 'api_key=3b74691a96811eecae740c01bb3dfeb1';\r\n\r\n  _apiBase = 'https://api.themoviedb.org/3';\r\n\r\n  async requestGenresList() {\r\n    const res = await fetch(`${this._apiBase}/genre/movie/list?${this._apiKey}&language=en-US`);\r\n    if (!res.ok) {\r\n      throw new Error(`Could not fetch url, received ${res.status}`);\r\n    }\r\n    return await res.json();\r\n  }\r\n\r\n  getGenresList() {\r\n    const genresList = this.requestGenresList();\r\n    return genresList;\r\n  }\r\n\r\n  async requestSearchList(searchTerm, pageNumber) {\r\n    const res = await fetch(`${this._apiBase}/search/movie?${this._apiKey}&query=${searchTerm}&page=${pageNumber}`);\r\n    if (!res.ok) {\r\n      throw new Error(`Could not fetch url, received ${res.status}`);\r\n    }\r\n    return await res.json();\r\n  }\r\n\r\n  getSearchList(searchTerm, pageNumber) {\r\n    const filmList = this.requestSearchList(searchTerm, pageNumber);\r\n    return filmList;\r\n  }\r\n\r\n  async requestGuestSession() {\r\n    const res = await fetch(`${this._apiBase}/authentication/guest_session/new?${this._apiKey}`);\r\n    if (!res.ok) {\r\n      throw new Error(`Could not fetch url, received ${res.status}`);\r\n    }\r\n    return await res.json();\r\n  }\r\n\r\n  getGuestId() {\r\n    const guest = this.requestGuestSession();\r\n    return guest;\r\n  }\r\n\r\n  async requestRateMovie(movieId, guestId, requestBody) {\r\n    const response = await fetch(`${this._apiBase}/movie/${movieId}/rating?guest_session_id=${guestId}&${this._apiKey}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8',\r\n      },\r\n      body: JSON.stringify(requestBody),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Could not fetch url, received ${response.status}`);\r\n    }\r\n    const result = await response.json();\r\n    return result;\r\n  }\r\n\r\n  async requestRatedMovieList(guestId) {\r\n    const res = await fetch(`${this._apiBase}/guest_session/${guestId}/rated/movies?${this._apiKey}`);\r\n    if (!res.ok) {\r\n      throw new Error(`Could not fetch url, received ${res.status}`);\r\n    }\r\n    return await res.json();\r\n  }\r\n\r\n  getRatedList(guestId) {\r\n    const Rated = this.requestRatedMovieList(guestId);\r\n    return Rated;\r\n  }\r\n}","import React, { Component } from 'react';\r\n\r\nexport default class ErrorBoundary extends Component {\r\n  state = {\r\n    hasError: false,\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <h1>Something wrong</h1>;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","import React from 'react';\r\nimport { Spin } from 'antd';\r\n\r\nconst Spinner = () => (\r\n    <Spin size='large'/>\r\n);\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nconst {\r\n  Provider: GenresProvider,\r\n  Consumer: GenresConsumer,\r\n} = React.createContext();\r\n\r\nexport { GenresProvider, GenresConsumer };","/* eslint-disable import/no-unresolved */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { List, Empty, Result } from 'antd';\r\nimport MovieItem from '../MovieItem/MovieItem';\r\nimport Navigation from '../../components/Navigation/Navigation';\r\nimport ApiService from '../../services/api-service';\r\nimport ErrorBoundary from '../../ErrorBoundary/ErrorBoundary';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport { GenresConsumer } from '../../Context/Context';\r\nimport './SearchMovieList.css';\r\nimport 'antd/dist/antd.css';\r\n\r\nclass SearchMovieList extends Component {\r\n  static propTypes = {\r\n    searchMovies: PropTypes.array,\r\n    loadMovieList: PropTypes.bool,\r\n    totalMovieResults: PropTypes.number,\r\n    hasError: PropTypes.bool,\r\n    currentPage: PropTypes.number,\r\n    col: PropTypes.number,\r\n  }\r\n\r\n  state = {\r\n    searchMovies: [],\r\n    currentPage: '1',\r\n    totalMovieResults: 0,\r\n    loadMovieList: false,\r\n    col: 2,\r\n    hasError: false,\r\n  };\r\n\r\n  apiService = new ApiService();\r\n\r\n  componentDidMount() {\r\n    // this.searchList(this.props.searchTerm, this.state.currentPage);\r\n    this.checkWidth();\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.currentPage !== prevState.currentPage\r\n      || (this.props.searchTerm !== prevProps.searchTerm && this.props.searchTerm !== '')\r\n      || this.props.onRateClick !== prevProps.onRateClick\r\n      || (this.props.searchTerm && this.props.activeTab !== prevProps.activeTab)) {\r\n      this.searchList(this.props.searchTerm, this.state.currentPage);\r\n    }\r\n  }\r\n\r\n  searchList = (searchTerm, pageNumber) => {\r\n    this.apiService\r\n      .getSearchList(searchTerm, pageNumber)\r\n      .then((list) => {\r\n        this.setState({\r\n          searchMovies: [...list.results],\r\n          totalMovieResults: list.total_results,\r\n          loadMovieList: true,\r\n        });\r\n      })\r\n      .catch(this.onError);\r\n  }\r\n\r\n  onError = () => {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  checkWidth = () => {\r\n    if (document.documentElement.clientWidth < 800) {\r\n      this.setState({\r\n        col: 1,\r\n      });\r\n    }\r\n  }\r\n\r\n  nextPage = (newPage) => {\r\n    this.setState({\r\n      currentPage: newPage,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      searchMovies, currentPage, loadMovieList, col, hasError, totalMovieResults,\r\n    } = this.state;\r\n    const data = searchMovies.map((film) => ({\r\n      id: film.id,\r\n      poster: film.poster_path,\r\n      rating: film.rating,\r\n      title: film.original_title,\r\n      overview: film.overview,\r\n      date: film.release_date,\r\n      genreIds: film.genre_ids,\r\n      voteAverage: film.vote_average,\r\n    }));\r\n    if (hasError) {\r\n      return <Result\r\n              status=\"warning\"\r\n              title=\"There are some problems with your internet.\"\r\n            />;\r\n    }\r\n    if (this.props.searchTerm\r\n      && this.props.loadGenres\r\n      && loadMovieList\r\n      && totalMovieResults !== 0) {\r\n      return (\r\n        <GenresConsumer>\r\n          {\r\n            (genres) => (\r\n                <React.Fragment>\r\n                  <div className='movie-list'>\r\n                    <List\r\n                      grid={{ gutter: 20, column: col }}\r\n                      dataSource={data}\r\n                      renderItem={(item) => (\r\n                        <List.Item>\r\n                          <ErrorBoundary key= {item.id}>\r\n                            <MovieItem\r\n                              hasError={this.state.hasError}\r\n                              filmId={item.id}\r\n                              poster={item.poster}\r\n                              title={item.title}\r\n                              date={item.date}\r\n                              overview={item.overview}\r\n                              genreIds={item.genreIds}\r\n                              voteAverage={item.voteAverage}\r\n                              genresList={genres}\r\n                              rating={item.rating}\r\n                              rateMovie={this.props.rateMovie}\r\n                              guestId={this.props.guestId}\r\n                            />\r\n                          </ErrorBoundary>\r\n                        </List.Item>\r\n                      )}\r\n                    />\r\n                  </div>\r\n                  <Navigation\r\n                    totalMovieResults={totalMovieResults}\r\n                    currentPage={currentPage}\r\n                    loadMovieList={loadMovieList}\r\n                    nextPage={this.nextPage}\r\n                  />\r\n                </React.Fragment>\r\n            )\r\n          }\r\n        </GenresConsumer>\r\n      );\r\n    }\r\n    if (!this.props.searchTerm) {\r\n      return <Empty description='Введите название фильма'/>;\r\n    }\r\n    if (!this.state.totalMovieResults && loadMovieList) {\r\n      return <Empty description='Поиск не дал результатов'/>;\r\n    }\r\n    return <Spinner />;\r\n  }\r\n}\r\n\r\nexport default SearchMovieList;","/* eslint-disable import/no-unresolved */\r\nimport React, { Component } from 'react';\r\nimport PropTypes, { number } from 'prop-types';\r\nimport { List, Empty, Result } from 'antd';\r\nimport MovieItem from '../MovieItem/MovieItem';\r\nimport Navigation from '../../components/Navigation/Navigation';\r\nimport ErrorBoundary from '../../ErrorBoundary/ErrorBoundary';\r\nimport ApiService from '../../services/api-service';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport 'antd/dist/antd.css';\r\nimport './RatedMovieList.css';\r\n\r\nclass RatedMovieList extends Component {\r\n  static propTypes = {\r\n    ratedMovies: PropTypes.array,\r\n    loadMovieList: PropTypes.bool,\r\n    totalMovieResults: PropTypes.number,\r\n    hasError: PropTypes.bool,\r\n    currentPage: PropTypes.number,\r\n    col: PropTypes.number,\r\n  }\r\n\r\n  state = {\r\n    ratedMovies: [],\r\n    currentPage: '1',\r\n    loadMovieList: false,\r\n    totalMovieResults: 0,\r\n    col: 2,\r\n    hasError: false,\r\n  };\r\n\r\n  apiService = new ApiService();\r\n\r\n  componentDidMount() {\r\n    this.checkWidth();\r\n    this.ratedList(this.props.guestId);\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.activeTab !== prevProps.activeTab\r\n      || this.props.onRateClick !== prevProps.onRateClick) {\r\n      this.ratedList(this.props.guestId);\r\n    }\r\n  }\r\n\r\n  checkWidth = () => {\r\n    if (document.documentElement.clientWidth < 800) {\r\n      this.setState({\r\n        col: 1,\r\n      });\r\n    }\r\n  }\r\n\r\n  ratedList = (guestId) => {\r\n    this.apiService\r\n      .getRatedList(guestId)\r\n      .then((list) => {\r\n        this.setState({\r\n          ratedMovies: [...list.results],\r\n          totalMovieResults: list.total_results,\r\n          loadMovieList: true,\r\n        });\r\n      })\r\n      .catch(this.onError);\r\n  };\r\n\r\n  onError = () => {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      ratedMovies, loadMovieList, totalMovieResults, hasError, currentPage, col,\r\n    } = this.state;\r\n    const data = ratedMovies.map((film) => ({\r\n      id: film.id,\r\n      poster: film.poster_path,\r\n      rating: film.rating,\r\n      title: film.original_title,\r\n      overview: film.overview,\r\n      date: film.release_date,\r\n      genreIds: film.genre_ids,\r\n      voteAverage: film.vote_average,\r\n    }));\r\n\r\n    if (hasError) {\r\n      return <Result\r\n              status=\"warning\"\r\n              title=\"There are some problems with your internet.\"\r\n            />;\r\n    }\r\n    if (totalMovieResults === 0) {\r\n      return <Empty description=\"Вы еще не оценили ни одного фильма\"/>;\r\n    }\r\n    if (loadMovieList && this.props.loadGenres) {\r\n      return (\r\n        <React.Fragment>\r\n          <div className='MovieList'>\r\n            <List\r\n            grid={{ gutter: 20, column: col }}\r\n            dataSource={data}\r\n            renderItem={(item) => (\r\n              <List.Item>\r\n                <ErrorBoundary key={item.id}>\r\n                  <MovieItem\r\n                    filmId={item.id}\r\n                    poster={item.poster}\r\n                    title={item.title}\r\n                    date={item.date}\r\n                    overview={item.overview}\r\n                    genreIds={item.genreIds}\r\n                    voteAverage={item.voteAverage}\r\n                    genresList={this.props.genres}\r\n                    rating={item.rating}\r\n                    rateMovie={this.props.rateMovie}\r\n                    guestId={this.props.guestId}\r\n                  />\r\n                </ErrorBoundary>\r\n              </List.Item>\r\n            )}\r\n            />\r\n          </div>\r\n          <Navigation\r\n            totalMovieResults={totalMovieResults}\r\n            currentPage={currentPage}\r\n            loadMovieList={loadMovieList}\r\n            nextPage={this.nextPage}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return (<Spinner />);\r\n  }\r\n}\r\n\r\nexport default RatedMovieList;","import React, { Component } from 'react';\r\nimport { Tabs, Input } from 'antd';\r\nimport SearchMovieList from '../../containers/SearchMovieList/SearchMovieList';\r\nimport RatedMovieList from '../../containers/RatedMovieList/RatedMovieList';\r\nimport './TabPanel.css';\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Search } = Input;\r\n\r\nclass TabPanel extends Component {\r\n  componentDidMount() {\r\n    this.inputRef.focus();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      activeTab, rateMovie, guestId, onRateClick, genres, loadGenres, searchTerm, changeSearch,\r\n    } = this.props;\r\n    return (\r\n    <div className='TabPanel'>\r\n      <Tabs className=\"tabs\" defaultActiveKey=\"1\" onChange={(e) => { this.props.changeTab(e); }}>\r\n        <TabPane tab=\"Search\" key=\"1\">\r\n          <Search\r\n            // eslint-disable-next-line no-return-assign\r\n            ref={(inputRef) => this.inputRef = inputRef}\r\n            className='search'\r\n            placeholder='Search movie'\r\n            onChange={(e) => (changeSearch(e.target.value))}\r\n          />\r\n          <SearchMovieList\r\n            rateMovie={rateMovie}\r\n            searchTerm={searchTerm}\r\n            guestId={guestId}\r\n            onRateClick={onRateClick}\r\n            genres={genres}\r\n            loadGenres={loadGenres}\r\n            activeTab={activeTab}\r\n          />\r\n        </TabPane>\r\n        <TabPane tab=\"Rated\" key=\"2\" >\r\n          <RatedMovieList\r\n            rateMovie={rateMovie}\r\n            guestId={guestId}\r\n            onRateClick={onRateClick}\r\n            genres={genres}\r\n            loadGenres={loadGenres}\r\n            activeTab={activeTab}\r\n          />\r\n        </TabPane>\r\n      </Tabs>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TabPanel;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Result } from 'antd';\r\nimport TabPanel from '../../components/TabPanel/TabPanel';\r\nimport ApiService from '../../services/api-service';\r\nimport ErrorBoundary from '../../ErrorBoundary/ErrorBoundary';\r\nimport { GenresProvider } from '../../Context/Context';\r\nimport { debounce } from '../../../node_modules/lodash';\r\nimport 'antd/dist/antd.css';\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  static propTypes = {\r\n    genres: PropTypes.array,\r\n    searchTerm: PropTypes.string,\r\n    guestSessionId: PropTypes.number,\r\n    onRateClick: PropTypes.number,\r\n    totalRatedResults: PropTypes.number,\r\n    activeTab: PropTypes.number,\r\n    loadGenres: PropTypes.bool,\r\n    hasError: PropTypes.bool,\r\n  }\r\n\r\n  state = {\r\n    genres: [],\r\n    loadGenres: false,\r\n    guestSessionId: null,\r\n    onRateClick: 0,\r\n    activeTab: 1,\r\n    searchTerm: '',\r\n    hasError: false,\r\n  }\r\n\r\n  apiService = new ApiService();\r\n\r\n  componentDidMount() {\r\n    this.guestSession();\r\n    this.genres();\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  changeSearch = debounce((e) => {\r\n    this.setState({\r\n      searchTerm: e,\r\n      currentPage: 1,\r\n    });\r\n  }, 1500);\r\n\r\n  changeTab = (tab) => {\r\n    this.setState({\r\n      activeTab: tab,\r\n    });\r\n  }\r\n\r\n  guestSession = () => {\r\n    this.apiService\r\n      .getGuestId()\r\n      .then((session) => {\r\n        this.setState({\r\n          guestSessionId: session.guest_session_id,\r\n        });\r\n      })\r\n      .catch(this.onError);\r\n  }\r\n\r\n  genres = () => {\r\n    this.apiService\r\n      .getGenresList()\r\n      .then((list) => {\r\n        this.setState({\r\n          genres: [...list.genres],\r\n          loadGenres: true,\r\n        });\r\n      })\r\n      .catch(this.onError);\r\n  }\r\n\r\n  onError = () => {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  rateMovie = (movieId, guestId, requestBody) => {\r\n    this.apiService\r\n      .requestRateMovie(movieId, guestId, requestBody)\r\n      // eslint-disable-next-line no-return-assign\r\n      .then(this.setState((prevState) => ({ onRateClick: prevState.onRateClick += 1 })))\r\n      .catch(this.onError);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <Result\r\n            status=\"warning\"\r\n            title=\"There are some problems with your internet.\"\r\n            />;\r\n    }\r\n    return (\r\n      <GenresProvider value={this.state.genres}>\r\n        <ErrorBoundary>\r\n          <div className='wrapper'>\r\n            <TabPanel\r\n              rateMovie={this.rateMovie}\r\n              guestId={this.state.guestSessionId}\r\n              onRateClick={this.state.onRateClick}\r\n              genres={this.state.genres}\r\n              loadGenres={this.state.loadGenres}\r\n              changeSearch={this.changeSearch}\r\n              searchTerm={this.state.searchTerm}\r\n              changeTab={this.changeTab}\r\n              activeTab={this.state.activeTab}\r\n              inputRef={this.inputRef}\r\n            />\r\n          </div>\r\n        </ErrorBoundary>\r\n      </GenresProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './containers/App/App';\r\n\r\nconst div = document.getElementById('root');\r\nReactDOM.render(<App />, div);\r\n"],"sourceRoot":""}