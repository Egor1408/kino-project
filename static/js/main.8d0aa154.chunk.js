(this["webpackJsonpkino-project"]=this["webpackJsonpkino-project"]||[]).push([[0],{143:function(e,t,a){e.exports=a(233)},148:function(e,t,a){},201:function(e,t,a){},222:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(15),i=a.n(s),o=a(63),c=a(38),u=a(39),l=a(43),h=a(42),v=a(244),p=a(99),d=a(240),m=a(245),g=a(68),f=a(141),E=a(239),b=a(242),y=a(243),k=a(238),w=a(241),S=(a(148),E.a.Text),M=E.a.Title,j=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.poster,a=e.title,r=e.date,s=e.genresList,i=e.genreIds,o=e.overview,c=e.rateMovie,u=e.filmId,l=e.guestId,h=e.voteAverage,v=e.rating,p=i.map((function(e){var t=s.filter((function(t){return t.id===e})),a=Object(f.a)(t,1)[0];return n.a.createElement(S,{code:!0,key:a.id},a.name)})),d=n.a.createElement("div",{className:"noImage"},n.a.createElement("span",null,"No Image"),n.a.createElement(w.a,null));t&&(d=n.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185".concat(t),alt:"poster"}));var m=null;m=h>=7?"#66e900":h>=5?"#e9d100":h>=3?"#e97e00":"#e90000";var g=r?Object(k.a)(new Date(r),"MMMM d, yyyy"):null;return n.a.createElement(b.a,null,n.a.createElement("div",{className:"poster"},d),n.a.createElement("div",{className:"description"},n.a.createElement("div",{className:"title"},n.a.createElement(M,{level:4},a)),n.a.createElement("div",{className:"vote-average",style:{borderColor:m}},n.a.createElement("span",null,h)),n.a.createElement("div",{className:"date"},n.a.createElement(S,{type:"secondary"},g)),n.a.createElement("div",{className:"genres"},p),n.a.createElement("div",{className:"overview"},n.a.createElement(S,{strong:!0},o)),n.a.createElement("div",{className:"rate"},n.a.createElement(y.a,{allowHalf:!0,count:"10",defaultValue:v,style:{fontSize:14},onChange:function(e){c(u,l,{value:e})}}))))}}]),a}(r.Component),O=a(139),T=(a(201),function(e){var t=e.totalMovieResults,a=e.nextPage;return e.loadMovieList&&t>20?n.a.createElement(O.a,{total:t,pageSize:"20",onChange:function(e){a(e)}}):null}),C=a(46),I=a.n(C),R=a(67),_=function(){function e(){Object(c.a)(this,e),this._apiKey="api_key=3b74691a96811eecae740c01bb3dfeb1",this._apiBase="https://api.themoviedb.org/3"}return Object(u.a)(e,[{key:"requestGenresList",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/genre/movie/list?").concat(this._apiKey,"&language=en-US"));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url, received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGenresList",value:function(){return this.requestGenresList()}},{key:"requestSearchList",value:function(){var e=Object(R.a)(I.a.mark((function e(t,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/search/movie?").concat(this._apiKey,"&query=").concat(t,"&page=").concat(a));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url, received ".concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getSearchList",value:function(e,t){return this.requestSearchList(e,t)}},{key:"requestGuestSession",value:function(){var e=Object(R.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/authentication/guest_session/new?").concat(this._apiKey));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url, received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGuestId",value:function(){return this.requestGuestSession()}},{key:"requestRateMovie",value:function(){var e=Object(R.a)(I.a.mark((function e(t,a,r){var n,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/movie/").concat(t,"/rating?guest_session_id=").concat(a,"&").concat(this._apiKey),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url, received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"requestRatedMovieList",value:function(){var e=Object(R.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase,"/guest_session/").concat(t,"/rated/movies?").concat(this._apiKey));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url, received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRatedList",value:function(e){return this.requestRatedMovieList(e)}}]),e}(),L=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={hasError:!1},e}return Object(u.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?n.a.createElement("h1",null,"Something wrong"):this.props.children}}]),a}(r.Component),x=a(133),P=function(){return n.a.createElement(x.a,{size:"large"})},G=n.a.createContext(),N=G.Provider,A=G.Consumer,q=(a(222),a(94),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchMovies:[],currentPage:"1",totalMovieResults:0,loadMovieList:!1,col:2,hasError:!1},e.apiService=new _,e.searchList=function(t,a){e.apiService.getSearchList(t,a).then((function(t){e.setState({searchMovies:Object(o.a)(t.results),totalMovieResults:t.total_results,loadMovieList:!0})})).catch(e.onError)},e.onError=function(){e.setState({hasError:!0})},e.checkWidth=function(){document.documentElement.clientWidth<800&&e.setState({col:1})},e.nextPage=function(t){e.setState({currentPage:t})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.checkWidth()}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"componentDidUpdate",value:function(e,t){(this.state.currentPage!==t.currentPage||this.props.searchTerm!==e.searchTerm&&""!==this.props.searchTerm||this.props.onRateClick!==e.onRateClick||this.props.searchTerm&&this.props.activeTab!==e.activeTab)&&this.searchList(this.props.searchTerm,this.state.currentPage)}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchMovies,r=t.currentPage,s=t.loadMovieList,i=t.col,o=t.hasError,c=t.totalMovieResults,u=a.map((function(e){return{id:e.id,poster:e.poster_path,rating:e.rating,title:e.original_title,overview:e.overview,date:e.release_date,genreIds:e.genre_ids,voteAverage:e.vote_average}}));return o?n.a.createElement(v.a,{status:"warning",title:"There are some problems with your internet."}):this.props.searchTerm&&this.props.loadGenres&&s&&0!==c?n.a.createElement(A,null,(function(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"movie-list"},n.a.createElement(m.b,{grid:{gutter:20,column:i},dataSource:u,renderItem:function(a){return n.a.createElement(m.b.Item,null,n.a.createElement(L,{key:a.id},n.a.createElement(j,{hasError:e.state.hasError,filmId:a.id,poster:a.poster,title:a.title,date:a.date,overview:a.overview,genreIds:a.genreIds,voteAverage:a.voteAverage,genresList:t,rating:a.rating,rateMovie:e.props.rateMovie,guestId:e.props.guestId})))}})),n.a.createElement(T,{totalMovieResults:c,currentPage:r,loadMovieList:s,nextPage:e.nextPage}))})):this.props.searchTerm?!this.state.totalMovieResults&&s?n.a.createElement(g.a,{description:"\u041f\u043e\u0438\u0441\u043a \u043d\u0435 \u0434\u0430\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"}):n.a.createElement(P,null):n.a.createElement(g.a,{description:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430"})}}]),a}(r.Component)),D=(a(225),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={ratedMovies:[],currentPage:"1",loadMovieList:!1,totalMovieResults:0,hasError:!1},e.apiService=new _,e.ratedList=function(t){e.apiService.getRatedList(t).then((function(t){e.setState({ratedMovies:Object(o.a)(t.results),totalMovieResults:t.total_results,loadMovieList:!0})})).catch(e.onError)},e.onError=function(){e.setState({hasError:!0})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.ratedList(this.props.guestId)}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"componentDidUpdate",value:function(e,t){this.props.activeTab===e.activeTab&&this.props.onRateClick===e.onRateClick||this.ratedList(this.props.guestId)}},{key:"render",value:function(){var e=this,t=this.state,a=t.ratedMovies,r=t.loadMovieList,s=t.totalMovieResults,i=t.hasError,o=t.currentPage,c=a.map((function(e){return{id:e.id,poster:e.poster_path,rating:e.rating,title:e.original_title,overview:e.overview,date:e.release_date,genreIds:e.genre_ids,voteAverage:e.vote_average}}));return i?n.a.createElement(v.a,{status:"warning",title:"There are some problems with your internet."}):0===s?n.a.createElement(g.a,{description:"\u0412\u044b \u0435\u0449\u0435 \u043d\u0435 \u043e\u0446\u0435\u043d\u0438\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u043c\u0430"}):r&&this.props.loadGenres?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"MovieList"},n.a.createElement(m.b,{grid:{gutter:20,column:2},dataSource:c,renderItem:function(t){return n.a.createElement(m.b.Item,null,n.a.createElement(L,{key:t.id},n.a.createElement(j,{filmId:t.id,poster:t.poster,title:t.title,date:t.date,overview:t.overview,genreIds:t.genreIds,voteAverage:t.voteAverage,genresList:e.props.genres,rating:t.rating,rateMovie:e.props.rateMovie,guestId:e.props.guestId})))}})),n.a.createElement(T,{totalMovieResults:s,currentPage:o,loadMovieList:r,nextPage:this.nextPage})):n.a.createElement(P,null)}}]),a}(r.Component)),B=(a(226),p.a.TabPane),K=d.a.Search,z=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.inputRef.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeTab,r=t.rateMovie,s=t.guestId,i=t.onRateClick,o=t.genres,c=t.loadGenres,u=t.searchTerm,l=t.changeSearch;return n.a.createElement("div",{className:"TabPanel"},n.a.createElement(p.a,{className:"tabs",defaultActiveKey:"1",onChange:function(t){e.props.changeTab(t)}},n.a.createElement(B,{tab:"Search",key:"1"},n.a.createElement(K,{ref:function(t){return e.inputRef=t},className:"search",placeholder:"Search movie",onChange:function(e){return l(e.target.value)}}),n.a.createElement(q,{rateMovie:r,searchTerm:u,guestId:s,onRateClick:i,genres:o,loadGenres:c,activeTab:a})),n.a.createElement(B,{tab:"Rated",key:"2"},n.a.createElement(D,{rateMovie:r,guestId:s,onRateClick:i,genres:o,loadGenres:c,activeTab:a}))))}}]),a}(r.Component),J=a(138),U=(a(232),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={genres:[],loadGenres:!1,guestSessionId:null,onRateClick:0,activeTab:1,searchTerm:"",hasError:!1},e.apiService=new _,e.changeSearch=Object(J.debounce)((function(t){e.setState({searchTerm:t,currentPage:1})}),1500),e.changeTab=function(t){e.setState({activeTab:t})},e.guestSession=function(){e.apiService.getGuestId().then((function(t){e.setState({guestSessionId:t.guest_session_id})})).catch(e.onError)},e.genres=function(){e.apiService.getGenresList().then((function(t){e.setState({genres:Object(o.a)(t.genres),loadGenres:!0})})).catch(e.onError)},e.onError=function(){e.setState({hasError:!0})},e.rateMovie=function(t,a,r){e.apiService.requestRateMovie(t,a,r).then(e.setState((function(e){return{onRateClick:e.onRateClick+=1}}))).catch(e.onError)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.guestSession(),this.genres()}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?n.a.createElement(v.a,{status:"warning",title:"There are some problems with your internet."}):n.a.createElement(N,{value:this.state.genres},n.a.createElement(L,null,n.a.createElement("div",{className:"wrapper"},n.a.createElement(z,{rateMovie:this.rateMovie,guestId:this.state.guestSessionId,onRateClick:this.state.onRateClick,genres:this.state.genres,loadGenres:this.state.loadGenres,changeSearch:this.changeSearch,searchTerm:this.state.searchTerm,changeTab:this.changeTab,activeTab:this.state.activeTab,inputRef:this.inputRef}))))}}]),a}(r.Component)),W=document.getElementById("root");i.a.render(n.a.createElement(U,null),W)}},[[143,1,2]]]);
//# sourceMappingURL=main.8d0aa154.chunk.js.map